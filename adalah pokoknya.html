<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adalah Pokoknya</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      font-family: 'Nunito', sans-serif;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    @keyframes bounce-in {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes wiggle {
      0%, 100% { transform: rotate(-3deg); }
      50% { transform: rotate(3deg); }
    }
    
    @keyframes confetti {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(255, 182, 193, 0.5); }
      50% { box-shadow: 0 0 40px rgba(255, 182, 193, 0.8); }
    }
    
    @keyframes slide-up {
      0% { transform: translateY(50px); opacity: 0; }
      100% { transform: translateY(0); opacity: 1; }
    }
    
    @keyframes emoji-pop {
      0% { transform: scale(0) rotate(-180deg); }
      50% { transform: scale(1.5) rotate(10deg); }
      100% { transform: scale(1) rotate(0deg); }
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .float-animation {
      animation: float 3s ease-in-out infinite;
    }
    
    .bounce-in {
      animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    .wiggle {
      animation: wiggle 0.5s ease-in-out infinite;
    }
    
    .slide-up {
      animation: slide-up 0.5s ease-out;
    }
    
    .emoji-pop {
      animation: emoji-pop 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    .confetti-piece {
      animation: confetti 1s ease-out forwards;
    }
    
    .btn-start {
      animation: pulse-glow 2s ease-in-out infinite;
      transition: all 0.3s ease;
    }
    
    .btn-start:hover {
      transform: scale(1.1);
    }
    
    .floating-emoji {
      position: absolute;
      font-size: 2rem;
      animation: float 4s ease-in-out infinite;
    }
    
    .question-card {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.9);
    }
    
    .spinner {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 0.8s linear infinite;
      display: inline-block;
      margin-left: 8px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full overflow-auto">
  <div id="app-wrapper" class="w-full min-h-full relative overflow-hidden" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 50%, #ffeaa7 100%);"><!-- Floating Background Emojis -->
   <div class="absolute inset-0 pointer-events-none overflow-hidden"><span class="floating-emoji" style="top: 10%; left: 5%; animation-delay: 0s;">üå∏</span> <span class="floating-emoji" style="top: 20%; right: 10%; animation-delay: 0.5s;">‚ú®</span> <span class="floating-emoji" style="top: 60%; left: 8%; animation-delay: 1s;">ü¶ã</span> <span class="floating-emoji" style="top: 40%; right: 5%; animation-delay: 1.5s;">üåà</span> <span class="floating-emoji" style="bottom: 20%; left: 15%; animation-delay: 2s;">üç∞</span> <span class="floating-emoji" style="bottom: 30%; right: 15%; animation-delay: 2.5s;">üíñ</span> <span class="floating-emoji" style="top: 75%; right: 20%; animation-delay: 3s;">üå∫</span> <span class="floating-emoji" style="top: 5%; left: 40%; animation-delay: 0.8s;">‚≠ê</span> <span class="floating-emoji" style="bottom: 10%; left: 50%; animation-delay: 1.8s;">üéÄ</span>
   </div><!-- Name Input Screen -->
   <div id="name-screen" class="relative z-10 flex flex-col items-center justify-center min-h-full p-6">
    <div class="text-center bounce-in bg-white/90 backdrop-blur-md rounded-3xl p-8 max-w-lg shadow-2xl">
     <div class="text-6xl mb-4">
      üéÆ
     </div>
     <h1 id="title-text" class="text-4xl md:text-5xl font-black text-pink-600 mb-2 drop-shadow-lg">Adalah Pokoknya</h1>
     <p id="greeting-text" class="text-2xl md:text-3xl font-bold text-purple-600 mb-6">Hello ijy! üëã</p>
     <p class="text-lg text-gray-700 mb-6">Sebelum mulai, siapa namamu?</p>
     <div class="mb-6"><label for="player-name-input" class="block text-sm font-bold text-gray-700 mb-2 text-left">Nama Kamu:</label> <input type="text" id="player-name-input" class="w-full p-4 border-3 border-pink-300 rounded-2xl text-lg focus:outline-none focus:ring-4 focus:ring-pink-200 focus:border-pink-500 transition-all" placeholder="Tulis namamu... ‚ú®" maxlength="50">
     </div><button id="start-btn" class="btn-start w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white text-xl font-bold py-4 px-12 rounded-full shadow-xl hover:from-pink-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed"> üéØ MULAI üéØ </button>
    </div>
   </div><!-- Question Screen -->
   <div id="question-screen" class="relative z-10 hidden flex-col items-center justify-center min-h-full p-6">
    <div class="question-card w-full max-w-lg rounded-3xl shadow-2xl p-8 slide-up"><!-- Progress -->
     <div class="flex justify-between items-center mb-6"><span id="question-number" class="text-sm font-bold text-purple-600 bg-purple-100 px-4 py-2 rounded-full">Pertanyaan 1/5</span>
      <div id="progress-bar" class="flex-1 mx-4 h-3 bg-gray-200 rounded-full overflow-hidden">
       <div id="progress-fill" class="h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-500" style="width: 20%;"></div>
      </div>
     </div><!-- Question -->
     <div class="text-center mb-6">
      <div id="question-emoji" class="text-5xl mb-4">
       ü§î
      </div>
      <h2 id="question-text" class="text-xl md:text-2xl font-bold text-gray-800">Question goes here</h2>
     </div><!-- Answer Input -->
     <div class="mb-6"><label for="answer-input" class="block text-sm font-bold text-gray-700 mb-2 text-left">Jawabanmu:</label> <textarea id="answer-input" class="w-full p-4 border-3 border-pink-300 rounded-2xl text-lg focus:outline-none focus:ring-4 focus:ring-pink-200 focus:border-pink-500 resize-none transition-all" rows="3" placeholder="Ketik jawabanmu di sini... ‚úçÔ∏è"></textarea>
     </div><!-- Submit Button --> <button id="submit-btn" class="w-full bg-gradient-to-r from-green-400 to-teal-500 text-white text-lg font-bold py-4 rounded-2xl shadow-lg hover:from-green-500 hover:to-teal-600 transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center"> <span id="submit-text">Jawab! üöÄ</span> </button> <!-- Reaction Area -->
     <div id="reaction-area" class="hidden mt-6 text-center">
      <div id="reaction-emoji" class="text-7xl emoji-pop">
       üéâ
      </div>
      <p id="reaction-text" class="text-lg font-bold text-purple-600 mt-2">Mantap!</p>
     </div>
    </div>
   </div><!-- End Screen -->
   <div id="end-screen" class="relative z-10 hidden flex-col items-center justify-center min-h-full p-6">
    <div class="text-center bounce-in bg-white/90 backdrop-blur-md rounded-3xl p-8 max-w-lg shadow-2xl">
     <div class="text-7xl mb-4">
      üéä
     </div>
     <h2 class="text-3xl md:text-4xl font-black text-pink-600 mb-4">Selesai!</h2>
     <p id="end-message" class="text-xl text-gray-700 mb-6">Terima kasih sudah menjawab semua pertanyaan! üíï</p><!-- Answers Summary -->
     <div id="answers-summary" class="text-left bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl p-6 mb-6 max-h-64 overflow-y-auto">
      <h3 class="font-bold text-purple-600 mb-4 text-center">üìù Jawaban Kamu:</h3>
      <div id="answers-list"></div>
     </div>
     <div id="save-status" class="mb-4 p-3 rounded-xl text-sm font-bold hidden"><span id="save-status-text"></span>
     </div><button id="restart-btn" class="bg-gradient-to-r from-pink-500 to-purple-500 text-white text-lg font-bold py-4 px-10 rounded-full shadow-xl hover:from-pink-600 hover:to-purple-600 transform hover:scale-105 transition-all"> üîÑ Main Lagi </button>
    </div>
   </div><!-- Confetti Container -->
   <div id="confetti-container" class="fixed inset-0 pointer-events-none z-50"></div>
  </div>
  <script>
    const defaultConfig = {
      game_title: 'Adalah Pokoknya',
      greeting_text: 'Hello ijy! üëã',
      primary_color: '#ec4899',
      secondary_color: '#8b5cf6',
      background_color: '#ffecd2',
      text_color: '#1f2937',
      accent_color: '#10b981'
    };

    const questions = [
      { text: "Apa makanan kesukaan yu?", emoji: "üçï" },
      { text: "Yu bernapas pakai apa?", emoji: "üò§" },
      { text: "Mau kuliah dimana?", emoji: "üéì" },
      { text: "Kenapa kadang yu nyebelin?", emoji: "üòú" },
      { text: "Punya mantan ga?", emoji: "üíî" }
    ];

    const reactions = [
      { emoji: "üéâ", text: "Mantap sekali!" },
      { emoji: "‚ú®", text: "Keren banget!" },
      { emoji: "üåü", text: "Wow amazing!" },
      { emoji: "üíñ", text: "Sweet banget!" },
      { emoji: "üî•", text: "Slay!" },
      { emoji: "üòç", text: "Love it!" },
      { emoji: "ü•≥", text: "Party time!" },
      { emoji: "üíØ", text: "Perfect!" }
    ];

    let currentQuestion = 0;
    let answers = [];
    let playerName = '';
    let isSaving = false;

    // DOM Elements
    const nameScreen = document.getElementById('name-screen');
    const questionScreen = document.getElementById('question-screen');
    const endScreen = document.getElementById('end-screen');
    const startBtn = document.getElementById('start-btn');
    const submitBtn = document.getElementById('submit-btn');
    const submitText = document.getElementById('submit-text');
    const restartBtn = document.getElementById('restart-btn');
    const playerNameInput = document.getElementById('player-name-input');
    const answerInput = document.getElementById('answer-input');
    const questionText = document.getElementById('question-text');
    const questionEmoji = document.getElementById('question-emoji');
    const questionNumber = document.getElementById('question-number');
    const progressFill = document.getElementById('progress-fill');
    const reactionArea = document.getElementById('reaction-area');
    const reactionEmoji = document.getElementById('reaction-emoji');
    const reactionText = document.getElementById('reaction-text');
    const answersList = document.getElementById('answers-list');
    const confettiContainer = document.getElementById('confetti-container');
    const titleText = document.getElementById('title-text');
    const greetingText = document.getElementById('greeting-text');
    const endMessage = document.getElementById('end-message');
    const saveStatus = document.getElementById('save-status');
    const saveStatusText = document.getElementById('save-status-text');

    function showScreen(screen) {
      nameScreen.classList.add('hidden');
      nameScreen.classList.remove('flex');
      questionScreen.classList.add('hidden');
      questionScreen.classList.remove('flex');
      endScreen.classList.add('hidden');
      endScreen.classList.remove('flex');
      
      screen.classList.remove('hidden');
      screen.classList.add('flex');
    }

    function loadQuestion() {
      const q = questions[currentQuestion];
      questionText.textContent = q.text;
      questionEmoji.textContent = q.emoji;
      questionNumber.textContent = `Pertanyaan ${currentQuestion + 1}/${questions.length}`;
      progressFill.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
      answerInput.value = '';
      reactionArea.classList.add('hidden');
      submitBtn.disabled = false;
      submitText.innerHTML = 'Jawab! üöÄ';
      
      // Add animation
      questionEmoji.classList.remove('wiggle');
      void questionEmoji.offsetWidth;
      questionEmoji.classList.add('wiggle');
    }

    function showReaction() {
      const reaction = reactions[Math.floor(Math.random() * reactions.length)];
      reactionEmoji.textContent = reaction.emoji;
      reactionText.textContent = reaction.text;
      reactionArea.classList.remove('hidden');
      
      // Reset animation
      reactionEmoji.classList.remove('emoji-pop');
      void reactionEmoji.offsetWidth;
      reactionEmoji.classList.add('emoji-pop');
      
      // Create mini confetti
      createConfetti(5);
    }

    function createConfetti(count) {
      const colors = ['#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff', '#5f27cd'];
      
      for (let i = 0; i < count; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti-piece';
        confetti.style.position = 'fixed';
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.top = '50%';
        confetti.style.width = '10px';
        confetti.style.height = '10px';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        confetti.style.zIndex = '100';
        
        confettiContainer.appendChild(confetti);
        
        setTimeout(() => confetti.remove(), 1000);
      }
    }

    async function saveAnswersToSheet() {
      if (isSaving) return;
      
      isSaving = true;
      saveStatus.classList.add('hidden');
      
      const answerData = {
        player_name: playerName,
        answer_1: answers[0] || '',
        answer_2: answers[1] || '',
        answer_3: answers[2] || '',
        answer_4: answers[3] || '',
        answer_5: answers[4] || '',
        completed_at: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(answerData);
      
      if (result.isOk) {
        saveStatus.classList.remove('hidden');
        saveStatus.className = 'mb-4 p-3 rounded-xl text-sm font-bold bg-green-100 text-green-700';
        saveStatusText.textContent = '‚úÖ Jawaban berhasil disimpan!';
      } else {
        saveStatus.classList.remove('hidden');
        saveStatus.className = 'mb-4 p-3 rounded-xl text-sm font-bold bg-red-100 text-red-700';
        saveStatusText.textContent = '‚ùå Gagal menyimpan jawaban. Coba lagi nanti.';
      }
      
      isSaving = false;
    }

    async function showEndScreen() {
      answersList.innerHTML = '';
      answers.forEach((answer, index) => {
        const item = document.createElement('div');
        item.className = 'mb-4 p-3 bg-white rounded-xl shadow-sm';
        item.innerHTML = `
          <p class="text-sm font-bold text-purple-600 mb-1">${questions[index].emoji} ${questions[index].text}</p>
          <p class="text-gray-700">${answer}</p>
        `;
        answersList.appendChild(item);
      });
      
      endMessage.textContent = `Terima kasih ${playerName} sudah menjawab semua pertanyaan! üíï`;
      
      showScreen(endScreen);
      createConfetti(30);
      
      // Save to Canva Sheet
      await saveAnswersToSheet();
    }

    function resetGame() {
      currentQuestion = 0;
      answers = [];
      playerName = '';
      playerNameInput.value = '';
      showScreen(nameScreen);
    }

    // Event Listeners
    playerNameInput.addEventListener('input', () => {
      startBtn.disabled = playerNameInput.value.trim().length === 0;
    });

    startBtn.addEventListener('click', () => {
      const name = playerNameInput.value.trim();
      if (!name) {
        playerNameInput.classList.add('border-red-500');
        playerNameInput.placeholder = 'Nama wajib diisi! üòÖ';
        setTimeout(() => {
          playerNameInput.classList.remove('border-red-500');
          playerNameInput.placeholder = 'Tulis namamu... ‚ú®';
        }, 2000);
        return;
      }
      
      playerName = name;
      showScreen(questionScreen);
      loadQuestion();
    });

    submitBtn.addEventListener('click', () => {
      const answer = answerInput.value.trim();
      if (!answer) {
        answerInput.classList.add('border-red-500');
        answerInput.placeholder = 'Jawab dulu dong! üòÖ';
        setTimeout(() => {
          answerInput.classList.remove('border-red-500');
          answerInput.placeholder = 'Ketik jawabanmu di sini... ‚úçÔ∏è';
        }, 2000);
        return;
      }
      
      answers.push(answer);
      submitBtn.disabled = true;
      showReaction();
      
      setTimeout(() => {
        currentQuestion++;
        if (currentQuestion < questions.length) {
          loadQuestion();
        } else {
          showEndScreen();
        }
      }, 1500);
    });

    restartBtn.addEventListener('click', resetGame);

    // Enter key to submit
    playerNameInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        startBtn.click();
      }
    });

    answerInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        submitBtn.click();
      }
    });

    // Initialize startBtn as disabled
    startBtn.disabled = true;

    // Data SDK initialization
    const dataHandler = {
      onDataChanged(data) {
        // No need to display stored data in this quiz app
      }
    };

    // Initialize Data SDK
    (async () => {
      if (window.dataSdk) {
        const initResult = await window.dataSdk.init(dataHandler);
        if (!initResult.isOk) {
          console.error('Failed to initialize Data SDK');
        }
      }
    })();

    // Element SDK initialization
    async function onConfigChange(config) {
      const title = config.game_title || defaultConfig.game_title;
      const greeting = config.greeting_text || defaultConfig.greeting_text;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      
      titleText.textContent = title;
      greetingText.textContent = greeting;
      titleText.style.color = primaryColor;
      greetingText.style.color = secondaryColor;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ primary_color: value });
              }
            }
          },
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              config.secondary_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ secondary_color: value });
              }
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || 'Nunito',
          set: (value) => {
            config.font_family = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        },
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["game_title", config.game_title || defaultConfig.game_title],
        ["greeting_text", config.greeting_text || defaultConfig.greeting_text]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bc2c4e137585c2f',t:'MTc2ODExNzI1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>